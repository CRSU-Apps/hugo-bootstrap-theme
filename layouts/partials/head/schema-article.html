<!-- Article Schema.org Type -->
<!-- https://schema.org/Article -->

{{ $logo := resources.GetMatch (index ($.Site.Params.images) 0) }}
{{ $image := .Resources.GetMatch (index ($.Param "images") 0) }}

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": {{ .Title }},
  {{ with $image -}}
  "image": {{ $image.Permalink }},
  {{ end -}}
  "datePublished": {{ .PublishDate }},
  "dateModified": {{ .Lastmod }},
  {{- with (.Param "author") }}
  "author": {{ . }},
  {{ end -}}
  "mainEntityOfPage": { "@type": "WebPage" },
    "publisher": {
    "@type": "Organization",
    "name": {{ .Site.Title }}
    {{- with $logo -}}
    ,
    "logo": {
      "@type": "ImageObject",
      "url": {{ $logo.Permalink }}
    }
    {{ end -}}
  },
  "wordcount" : {{ .Content | countwords }},
  "description": {{ .Summary | plainify | safeHTML }},
  "keywords": [{{ if .IsPage}}{{ range $index, $tag := .Params.tags }}{{ $tag }},{{ end }}{{ else }}{{ range $plural, $terms := .Site.Taxonomies }}{{ range $term, $val := $terms }}{{ printf "%s," $term }}{{ end }}{{ end }}{{ end }}]
}
</script>